utility function of version two